/* Base */
body {
  font-family: Georgia, "Arial Unicode MS", "Noto Naskh Arabic", "B Nazanin";
  line-height: 2;
  background: #f9fafb;
  color: #1f2937;
  padding: 24px;
}
.container { max-width: 1100px; margin: auto; }
header { margin-bottom: 20px; border-bottom: 1px solid #e5e7eb; }
h1 { margin: 0 0 8px; font-size: 24px; }
.small { font-size: 13px; color: #6b7280; }
.tip { font-size: 13px; color: #6b7280; }

/* Layout: main + right sidebar */
.layout {
  display: grid;
  grid-template-columns: 1fr 360px;
  gap: 16px;
  align-items: start;
}
.sidebar { position: sticky; top: 24px; display: grid; gap: 12px; }
.sidebar .row { display: flex; gap: 8px; flex-wrap: wrap; }
.sidebar-tools { display: flex; gap: 8px; flex-wrap: wrap; }

/* Toolbar */
.toolbar { margin: 16px 0 24px; display: flex; gap: 8px; flex-wrap: wrap; }
button {
  background: #2563eb; color: #fff; border: none; border-radius: 6px;
  padding: 8px 12px; cursor: pointer; font-size: 14px;
}
button.secondary { background: #fff; color: #1f2937; border: 1px solid #e5e7eb; }

/* Sections and Q&A blocks */
details {
  margin-bottom: 12px; border: 1px solid #e5e7eb;
  border-radius: 8px; background: #fff; padding: 10px 12px;
}
.qa details {
  margin: 6px 5px; background: #f3f4f6;
  border: 2px solid #d1d5db; border-radius: 10px;
  padding: 8px 10px;
}

.section-toolbar {
  margin: 8px 0;
  display: flex;
  gap: 10px;
}
.section-toolbar button { background: #10b981; border-radius: 6px; padding: 6px 10px; font-size: 13px; }
.section-toolbar button.collapse-section { background: #f59e0b; }

/* Right-justified icon columns on each question line */
summary {
  display: grid;
  grid-template-columns: 1fr 28px 28px 28px; /* text + Delete, Edit, Play */
  align-items: center;
  gap: 8px;
  font-weight: 700;
  cursor: pointer;
}
.summary-text { overflow-wrap: anywhere; }

/* Icon buttons */
.icon-btn {
  width: 26px; height: 24px; border-radius: 15px; border: none;
  display: inline-flex; align-items: center; justify-content: center;
  font-size: 16px; line-height: 1; color: #fff; cursor: pointer;
}
.deleteQA { background:#e53935; }
.deleteQA::before { content:'ðŸ—‘ï¸'; }
.editQA { background:#0891b2; }
.editQA::before { content:'âœï¸'; }
.playQA { background:#4CAF50; }
.playQA::before { content:'â–¶'; }

/* Search */
#searchArea { margin: 10px 0; width: 100%; position: relative; }
#searchInput {
  width: 100%; padding: 8px 12px; border: 2px solid #4CAF50; border-radius: 6px; font-size: 14px; box-sizing: border-box;
}
#searchResults {
  position: absolute; top: 100%; left: 0; right: 0;
  background: #fff; border: 1px solid #ccc; border-radius: 0 0 6px 6px;
  max-height: 200px; overflow-y: auto; z-index: 1000;
}
#searchResults div { padding: 6px 10px; cursor: pointer; }
#searchResults div:hover { background: #f0f0f0; }

/* Effects */
.flash { animation: flashHighlight 3s ease-in-out; }
@keyframes flashHighlight { 0% { background: yellow; } 50% { background: transparent; } 100% { background: yellow; } }
.highlight { background: #c8f7c5; }

/* Panels */
#userPanel {
  border: 1px solid #ccc; background: #f9f9f9; padding: 10px;
  border-radius: 10px; line-height: 1.5; display: none;
}
#userPanel label { display: block; font-weight: bold; margin-bottom: 6px; }
#userPanel input[type="text"], #userPanel textarea, #userPanel select {
  width: 100%; padding: 8px; margin-bottom: 12px; border: 1px solid #aaa; border-radius: 6px; font-size: 0.95em;
}
#saveQA, #importExcel { background: #10b981; }
#saveQA:hover, #importExcel:hover { background: #059669; }
#logTitle { font-size: 1.1em; font-weight: bold; margin-top: 16px; display: none; }
#changeLog li { margin: 6px 0; font-size: 0.95em; }
#changeLog button { background: #cc0000; color:#fff; border:none; padding:4px 8px; border-radius:4px; cursor:pointer; font-size:0.85em; }
#changeLog button:hover { background:#ff3333; }

#manageUsersPanel {
  display: none; margin: 16px 0; padding: 12px; border: 1px solid #ddd; background: #fff; border-radius: 8px;
}
#manageUsersPanel .row { display:flex; gap:8px; margin-bottom:8px; flex-wrap:wrap; }
#manageUsersPanel input, #manageUsersPanel select { padding:6px; border:1px solid #aaa; border-radius:6px; }

/* Login */
#loginScreen { max-width: 420px; margin: 80px auto; padding: 16px; border: 1px solid #e5e7eb; background: #fff; border-radius: 8px; }
#loginScreen h2 { margin: 0 0 12px; }
#loginScreen input { width: 100%; padding: 8px; margin: 8px 0; border: 1px solid #aaa; border-radius: 6px; }
#loginScreen button { width: 100%; margin-top: 10px; }
#loginMessage { color: #dc2626; margin-top: 8px; }

/* Back to top */
#backToTop {
  position: fixed; bottom: 40px; right: 40px; z-index: 900;
  background-color: #FFF; border: none;
  width: 50px; height: 50px; font-size: 50px; cursor: pointer; display: none;
}

/* Print */
@media print {
  /* Hide interactive controls */
  #userPanel,
  #manageUsersPanel,
  #toggleInputs,
  #saveQA,
  #importExcel,
  #excelFile,
  #logTitle,
  #changeLog,
  #searchArea,
  #loginScreen,
  #backToTop,
  .toolbar,
  .section-toolbar,
  .sidebar,
  button {
    display: none !important;
  }


  body {
    background: #fff;
    color: #000;
    line-height: 1.6;
    margin: 20mm; /* standard margins */
  }
  .layout {
    display: block !important; /* collapse sidebar */

  .container { max-width:none;   width: 100% !important; margin:0; }
  details, .qa details {
    border:none !important; background:none !important; padding:0 !important;
    margin: 0 0 10px 0 !important;
    page-break-inside: avoid; break-inside: avoid;
  }
  /* Force each category to start on a new page */
  .container > details {
    page-break-before: always;   /* older browsers */
    break-before: page;          /* modern browsers */
  }
  .container > details:first-of-type {
    page-break-before: auto;
    break-before: auto;
  }


  /* Hide helper text */
  .small,
  .tip {
    display: none !important;
  }
  header h1 { position: running(pageHeader); }
  @page {
    margin: 0mm;
    @top-center { content: element(pageHeader); }
  }



  summary { display:block; font-weight:bold; margin:8px 0; }
  .qa { counter-reset: question; }
  .qa details summary .summary-text::before {
    counter-increment: question; content: counter(question) ". ";
    font-weight:bold; margin-right:6px;
  }
}
